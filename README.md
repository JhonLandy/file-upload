# 断点续传

## 使用

```js
  git clone 

```


## 功能点

1. 16进制文件头信息判断文件格式
2. 大文件分片上传
3. 文件hash计算，标记文件在
4. 文件分片续传
5. 文件秒传
6. 多文件断点续传

## 思路

  首先，利用16进制文件头信息判断文件类型。应为这部分信息是唯一的，修改了文件后缀还是能正确出来，从而限制文件类型。然后对文件进行hash计算（由于hash计算是比较消耗时间，放在主进程会堵塞），我们采用web-worker的处理方案。对大文件进行切片，因为网路速度不佳的时候，上传是缓慢的，容易上传失败，失败得重头开始上传，体验不好，这里选择断点续传，后端验证上传过的分片，只上传没上传过的文件切片，最后再合并文件，清理碎片（对于上传的文件，进行秒传）。但是，还有些问题，因为浏览器的并发数过大，会造成一丢丢卡顿，最后还需要控制文件并行数，请求并行数。

